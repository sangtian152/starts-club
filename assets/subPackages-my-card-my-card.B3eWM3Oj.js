import{k as t,a3 as e,l as a,o as l,c as s,w as i,a as d,a4 as n,i as o,n as r,u as c,b as f,t as h,d as u,e as m,F as p,f as _,h as x}from"./index-MTMoKUzn.js";import{_ as w}from"./export-helper-BCo6x5W8.js";import{m as g,p as v}from"./mock.CCRoO2eG.js";function b(t){t=t||32;const e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=e.length;let l="";for(let s=0;s<t;s++)l+=e.charAt(Math.floor(Math.random()*a));return l}const y=w({name:"unit-pie",data:()=>({messarr:[{color:"#464af8",num:"20",flownum:"20"},{color:"#ff6262",num:"50",flownum:"50"},{color:"#f7c11b",num:"60",flownum:"60"},{color:"#ff8015",num:"80",flownum:"80"},{color:"#17d0bc",num:"20",flownum:"20"}]}),computed:{canvasId:()=>"canvas_"+b(6)},mounted(){},methods:{init(){const{uniPlatform:e}=t();"web"===e?this.drawH5():this.drawMp()},drawH5(){const t=e(this.canvasId,this);let a=60,l=60,s=this.messarr,i=[],d=0;for(let e=0;e<s.length;e++){let t=Number(s[e].flownum),a=s[e].color;d+=t,i.push({data:t,color:a})}for(var n=0;n<i.length;n++){var o=0;if(t.beginPath(),n>0)for(var r=0;r<n;r++)o+=i[r].data/d*2*Math.PI;var c=o+i[n].data/d*2*Math.PI;t.arc(a,l,60,o,c),t.setLineWidth(1),t.lineTo(a,l),t.setStrokeStyle("#fff"),t.setFillStyle(i[n].color),t.fill(),t.closePath(),t.stroke()}t.draw()},drawMp(){a().in(this).select("#"+this.canvasId).fields({node:!0,size:!0}).exec((e=>{const a=e[0].node,l=a.getContext("2d"),{uniPlatform:s,pixelRatio:i}=t();let d=i;"web"===s&&(d=1),a.width=e[0].width*d,a.height=e[0].height*d,console.log(e[0],d);let n={x:a.width/2,y:a.height/2},o=this.messarr,r=[],c=0;for(let t=0;t<o.length;t++){let e=Number(o[t].flownum),a=o[t].color;c+=e,r.push({data:e,color:a})}console.log(l,70);let f=a.width/2;for(var h=0;h<r.length;h++){var u=0;if(l.beginPath(),h>0)for(var m=0;m<h;m++)u+=r[m].data/c*2*Math.PI;var p=u+r[h].data/c*2*Math.PI;l.arc(n.x,n.y,f,u,p),l.lineWidth=1,l.lineTo(n.x,n.y),l.strokeStyle="#fff",l.fillStyle=r[h].color,l.fill(),l.closePath(),l.stroke()}}))}}},[["render",function(t,e,a,r,c,f){const h=n,u=o;return l(),s(u,null,{default:i((()=>[d(h,{type:"2d",style:{width:"260rpx",height:"260rpx"},"canvas-id":f.canvasId,id:f.canvasId},null,8,["canvas-id","id"])])),_:1})}]]);class M{constructor(t,e,a,l,s,i){this.x=t,this.y=e,this.radius=a,this.color=l,this.speedX=s,this.speedY=i}update(t){this.x+=this.speedX,this.y+=this.speedY,(this.x+this.radius>t.width||this.x-this.radius<0)&&(this.speedX=-this.speedX),(this.y+this.radius>t.height||this.y-this.radius<0)&&(this.speedY=-this.speedY)}draw(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill(),t.closePath()}}const P=w({name:"unit-circle",data:()=>({}),computed:{canvasId:()=>"canvas_"+b(6)},mounted(){},methods:{queryCanvas(){return new Promise(((e,l)=>{const{uniPlatform:s,pixelRatio:i}=t();if("web"===s)e(document.getElementById(this.canvasId));else{a().in(this).select("#"+this.canvasId).fields({node:!0,size:!0}).exec((t=>{const a=t[0].node;a.width=t[0].width*i,a.height=t[0].height*i,e(a)}))}}))},async init(){const t=await this.queryCanvas();console.log(t,75);const e=t.getContext("2d"),a=this.initBubbles(t);this.animate(t,e,a)},animate(t,e,a){e.clearRect(0,0,t.width,t.height);for(let l=0;l<a.length;l++)a[l].update(t),a[l].draw(e);setTimeout((()=>{this.animate(t,e,a)}),100)},initBubbles(t){const e=[];for(let a=0;a<5;a++){let a=50*Math.random()+10,l=Math.random()*(t.width-2*a)+a,s=Math.random()*(t.height-2*a)+a,i=`rgba(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, 0.8)`,d=2*(Math.random()-.5),n=2*(Math.random()-.5);e.push(new M(l,s,a,i,d,n))}return e}}},[["render",function(t,e,a,r,c,f){const h=n,u=o;return l(),s(u,null,{default:i((()=>[d(h,{"canvas-id":f.canvasId,id:f.canvasId,type:"2d",style:{width:"260rpx",height:"260rpx"}},null,8,["canvas-id","id"])])),_:1})}]]),I=""+new URL("avatar-CUz_-M3A.png",import.meta.url).href;const k=w({components:{UnitPie:y,UnitCircle:P},data:()=>({detail:{},projectList:[]}),onLoad(t){this.memberId=t.id||"3",this.getData()},onReady(){this.$refs.pieRef.init(),this.$refs.circleRef.init()},methods:{getData(){this.detail=g.find((t=>t.id===this.memberId))||{};const{projects:t}=this.detail;this.projectList=t?v.filter((e=>t.includes(e.id))):[]},toTips(t){r({url:`/subPackages/tips-detail/tips-detail?id=${t.id}`})}}},[["render",function(t,e,a,n,r,w){const g=o,v=_,b=x,y=c("UnitPie"),M=c("UnitCircle");return l(),s(g,{class:"my-card page-content"},{default:i((()=>[d(g,{class:"user-name"},{default:i((()=>[d(g,null,{default:i((()=>[f("理事："+h(r.detail.name),1)])),_:1})])),_:1}),d(g,{class:"d-flex"},{default:i((()=>[d(g,{class:"user-avatar"},{default:i((()=>[d(v,{class:"avatar-image",src:I,mode:"widthFix"})])),_:1}),d(g,{class:"user-info"},{default:i((()=>[d(g,{class:"d-flex"},{default:i((()=>[d(g,{class:"flex-fixed"},{default:i((()=>[f("籍贯：")])),_:1}),d(g,null,{default:i((()=>[d(b,null,{default:i((()=>[f(h(r.detail.nativePlace),1)])),_:1})])),_:1})])),_:1}),d(g,{class:"m-t-20 d-flex"},{default:i((()=>[d(g,{class:"flex-fixed"},{default:i((()=>[f("职务：")])),_:1}),d(g,null,{default:i((()=>[d(b,null,{default:i((()=>[f(h(r.detail.companyName)+h(r.detail.job),1)])),_:1})])),_:1})])),_:1}),d(g,{class:"m-t-20 d-flex"},{default:i((()=>[d(g,{class:"flex-fixed"},{default:i((()=>[f("昵称：")])),_:1}),d(g,null,{default:i((()=>[d(b,null,{default:i((()=>[f(h(r.detail.nickName),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(g,{class:"d-flex m-t-40"},{default:i((()=>[d(g,{class:"flex-fit"},{default:i((()=>[d(g,{class:"card-label"},{default:i((()=>[d(b,null,{default:i((()=>[f("领域")])),_:1})])),_:1}),d(g,{class:"m-t-20"},{default:i((()=>[d(y,{ref:"pieRef"},null,512)])),_:1})])),_:1}),d(g,{class:"flex-fit"},{default:i((()=>[d(g,{class:"card-label"},{default:i((()=>[d(b,null,{default:i((()=>[f("圈子")])),_:1})])),_:1}),d(g,null,{default:i((()=>[d(M,{ref:"circleRef"},null,512)])),_:1})])),_:1})])),_:1}),d(g,{class:"d-flex m-t-40"},{default:i((()=>[d(g,{class:"flex-fit"},{default:i((()=>[d(g,{class:"card-label"},{default:i((()=>[d(b,null,{default:i((()=>[f("项目")])),_:1})])),_:1}),d(g,{class:"project-list m-t-20"},{default:i((()=>[(l(!0),u(p,null,m(r.projectList,(t=>(l(),s(g,{class:"project-item",key:t.id,onClick:e=>w.toTips(t)},{default:i((()=>[f(h(t.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),d(g,{class:"flex-fit"},{default:i((()=>[d(g,{class:"card-label"},{default:i((()=>[d(b,null,{default:i((()=>[f("自评")])),_:1})])),_:1}),d(g,{class:"self-evaluation m-t-20"},{default:i((()=>[f(" 我的项目我做主！ ")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-01dba567"]]);export{k as default};
